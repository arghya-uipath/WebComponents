<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Angular Element Web Component</title>
        <link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="../angular-components/styles.css" />
        <script type="text/javascript" src="script.js"></script>
		<script type="module" src="../angular-components/test-element03.js"></script>
    </head>
    <body>
        <h2>Angular Element Web Component</h2>
        Change Theme: <button id="themeButton" onclick="changeTheme()">Night</button>
        <br /><br />
        <test-element03 id="element" collapsed="true" metadata='{"count":10,"name":"Guest"}'>
            <p>This is a test 03: Web Component with Angular Element</p>
        </test-element03>
        <br /><br />
        <button id="devData" onclick="passDevMetadata()">Pass data</button>
        <button id="btnResult2" onclick="getResult2()">Get Result 02</button>
        <span id="result2"></span>
        <button id="btnResult3" onclick="getResult3()">Get Result 03</button>
        <span id="result3"></span>
        <script>
            registerEventListener();
            // NOTE: It DOES NOT work on document.body
            document.querySelector('test-element03').addEventListener('dataUpdate', function(e) {
                console.info('Angular emitted event...');
                console.info(e);
            });
            // Read data from Angular Element hacks
            // https://stackoverflow.com/questions/62400998/reading-data-from-angular-elements-web-component-in-plain-javascript
            function getResult2() {
                var result = document.querySelector('#element').result2;
                console.log(`#element.result = ${result}`);
                if (result) {
                    var resutText = `Name: ${result.name}, Count: ${result.count}`;
                    document.querySelector('#result2').innerHTML = resutText;
                }
            }
            function getResult3() {
                var result = document.querySelector('#element').result3;
                console.log(`#element.result = ${result}`);
                if (result) {
                    var resutText = `Name: ${result.name}, Count: ${result.count}`;
                    document.querySelector('#result3').innerHTML = resutText;
                }
            }
        </script>
    </body>
</html>